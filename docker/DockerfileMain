FROM nginx:1.15-alpine

# Set healthcheck route
RUN apk --no-cache add curl
HEALTHCHECK CMD curl -f http://localhost/healthcheck || exit 1

# Copy nginx conf
COPY docker/default.conf /etc/nginx/conf.d/default.conf
COPY docker/config.json /var/www/html/config.json
COPY docker/certs /certs
# Copy application bundle
RUN mkdir -p /var/www/html
COPY build /var/www/html/

# Runtime
EXPOSE 80
CMD nginx -g "daemon off;"
